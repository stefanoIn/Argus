<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="description" content="The Story of Urban Heat Islands: A Data-Driven Narrative">
    <meta name="theme-color" content="#ffffff">
    <title>Urban Heat Islands</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="apple-touch-icon" href="favicon.png">
    
    <!-- D3.js -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    
    <!-- GeoTIFF.js for reading TIFF files -->
    <script src="https://unpkg.com/geotiff@2.0.7/dist-browser/geotiff.js"></script>
    
    <!-- Custom Styles -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="nav-container">
            <div class="logo">
                <a href="index.html"><h1>Urban Heat Islands</h1></a>
            </div>
            <div class="header-controls">
                <button class="theme-toggle" aria-label="Toggle dark/light theme" title="Toggle theme">
                    <span class="theme-icon theme-icon-light">
                        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <!-- Sun rays -->
                            <circle cx="12" cy="12" r="4" fill="#FFD700"/>
                            <path d="M12 3V5M12 19V21M21 12H19M5 12H3M18.36 5.64L16.95 7.05M7.05 16.95L5.64 18.36M18.36 18.36L16.95 16.95M7.05 7.05L5.64 5.64" stroke="#FFA500" stroke-width="2" stroke-linecap="round"/>
                            <!-- Earth (daytime with blue and green continents) -->
                            <circle cx="16" cy="16" r="5" fill="#4A90E2" opacity="0.9"/>
                            <path d="M14 16C14 17.5 15 18.5 16 18.5C17 18.5 18 17.5 18 16C18 14.5 17 14 16 14C15 14 14 14.5 14 16Z" fill="#6ABF4B"/>
                            <path d="M15 15C15.5 15.5 16.5 15.5 17 15C17.5 14.5 17 13.5 16 13C15 12.5 14 13 14 14C14 14.5 14.5 15 15 15Z" fill="#4A7C3A"/>
                        </svg>
                    </span>
                    <span class="theme-icon theme-icon-dark">
                        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <!-- Earth at night (dark blue/gray) -->
                            <circle cx="12" cy="12" r="8" fill="#1a2332" stroke="#2d3748" stroke-width="1.5"/>
                            <!-- Continents (dark) -->
                            <path d="M8 10C8 11 9 12 10 12C11 12 12 11 12 10C12 9 11 8.5 10 8.5C9 8.5 8 9 8 10Z" fill="#0f1419" opacity="0.8"/>
                            <path d="M14 14C14 15 15 15.5 16 15.5C17 15.5 18 15 18 14C18 13 17 12.5 16 12.5C15 12.5 14 13 14 14Z" fill="#0f1419" opacity="0.8"/>
                            <!-- City lights (heat islands) - orange/red clusters -->
                            <circle cx="9" cy="10" r="0.8" fill="#ff6b35"/>
                            <circle cx="10.5" cy="9.5" r="0.6" fill="#e85d04"/>
                            <circle cx="8.5" cy="9" r="0.5" fill="#ff8c42"/>
                            <circle cx="13" cy="14" r="0.7" fill="#ff6b35"/>
                            <circle cx="14.5" cy="13.5" r="0.5" fill="#e85d04"/>
                            <circle cx="15" cy="14.5" r="0.6" fill="#ff8c42"/>
                            <circle cx="12.5" cy="15" r="0.5" fill="#ff6b35"/>
                            <!-- Additional heat spots -->
                            <circle cx="6" cy="12" r="0.7" fill="#e85d04" opacity="0.8"/>
                            <circle cx="17" cy="11" r="0.6" fill="#ff6b35" opacity="0.8"/>
                            <circle cx="16" cy="9" r="0.5" fill="#ff8c42" opacity="0.8"/>
                            <!-- Glow effect for heat islands -->
                            <circle cx="9" cy="10" r="1.2" fill="#ff6b35" opacity="0.2"/>
                            <circle cx="13" cy="14" r="1.2" fill="#ff6b35" opacity="0.2"/>
                        </svg>
                    </span>
                </button>
                <button class="mobile-menu-toggle" aria-label="Toggle navigation menu">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
            <ul class="nav-menu">
                <li><a href="#introduction">Introduction</a></li>
                <li><a href="#causes">Why They Happen</a></li>
                <li><a href="#impacts">What They Cause</a></li>
                <li><a href="#solutions">What Can Be Done</a></li>
                <li><a href="#methodology">Methodology</a></li>
            </ul>
        </nav>
    </header>

    <!-- Sidebar Toggle Button -->
    <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Toggle navigation menu" title="Navigation menu">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3 12H21M3 6H21M3 18H21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
    </button>

    <!-- Left Sidebar Navigation -->
    <nav class="sidebar-nav" id="sidebar-nav">
        <ul class="sidebar-nav-list">
            <li><a href="#introduction" class="sidebar-nav-link" data-section="introduction">Introduction</a></li>
            <li><a href="#causes" class="sidebar-nav-link" data-section="causes">Why They Happen</a></li>
            <li><a href="#impacts" class="sidebar-nav-link" data-section="impacts">What They Cause</a></li>
            <li><a href="#solutions" class="sidebar-nav-link" data-section="solutions">What Can Be Done</a></li>
            <li><a href="#methodology" class="sidebar-nav-link" data-section="methodology">Methodology</a></li>
        </ul>
    </nav>

    <!-- Hero / Introduction -->
    <section id="introduction" class="story-hero">
        <div class="story-container">
            <h1 class="story-title">Urban Heat Islands</h1>
            <p class="story-lead">
                As cities grow, they create their own climate. Urban areas become islands of heat, 
                significantly warmer than the surrounding countryside. This is the story of how 
                satellite data reveals this hidden phenomenon and what it means for millions of people.
            </p>
        </div>
    </section>

    <!-- Story Content -->
    <main class="story-content">
        
        <!-- Chapter 1: What are UHI -->
        <section class="story-chapter">
            <div class="story-container">
                <div class="chapter-header">
                    <span class="chapter-number">01</span>
                    <h2 class="chapter-title">What Are Urban Heat Islands?</h2>
                </div>
                
                <div class="story-text">
                    <p class="story-paragraph story-fade-in">
                        Picture a city from above, viewed through a thermal camera. What you'd see 
                        is striking: the urban core glows like a hot ember, while the surrounding 
                        countryside appears cool and dark. This is an Urban Heat Island—a metropolitan 
                        area that experiences significantly warmer temperatures than its rural surroundings.
                    </p>
                    <p class="story-paragraph story-fade-in" style="animation-delay: 0.2s;">
                        The temperature difference is most dramatic at night, when urban areas can be 
                        1-3°C warmer on average, and up to 12°C warmer in extreme cases. This isn't 
                        just a curiosity—it affects energy consumption, public health, and the daily 
                        lives of millions of urban residents.
                    </p>
                </div>

                <!-- Story Transition -->
                <div class="story-transition">
                    <hr>
                    <span>How Do They Form?</span>
                    <hr>
                </div>

                <div class="story-text">
                    <p class="story-paragraph story-fade-in">
                        Urban Heat Islands emerge from a simple principle: <span class="highlight-text">what cities are made of</span>. 
                        Sidewalks, roads, parking lots, and buildings—constructed from asphalt, brick, and concrete—share 
                        a critical characteristic. These materials absorb sunlight during the day and release stored heat 
                        slowly, particularly at night, creating a persistent thermal blanket over urban areas.
                    </p>
                    <p class="story-paragraph story-fade-in" style="animation-delay: 0.2s;">
                        While the Sun shines equally on cities and countryside, urban surfaces behave fundamentally differently. 
                        Many hard, dark city surfaces have <strong>low albedo</strong>—they reflect less sunlight and absorb 
                        more energy. Crucially, because these surfaces hold virtually no water, they cannot cool through 
                        evaporation the way soil, grass, or trees can. Instead, absorbed energy converts directly to heat, 
                        spreading through the air via infrared radiation, convection, and conduction.
                    </p>
                    <p class="story-paragraph story-fade-in" style="animation-delay: 0.4s;">
                        The result: <span class="highlight-text">a warmer "bubble" over urban areas</span>—sometimes several 
                        degrees hotter than nearby suburbs or countryside. The contrast between rocky, impervious city surfaces 
                        and natural, water-rich rural landscapes creates one of the most significant human modifications to 
                        local climate. Understanding this thermal signature is the first step toward designing cities that 
                        remain livable as global temperatures rise.
                    </p>
                </div>

                <!-- Visualization 1: Genoa UHI from TIFF -->
                <div class="story-viz">
                    <div class="story-viz-container">
                        <h3 class="viz-title">Genoa Urban Heat Island: Satellite Thermal Imagery</h3>
                        <div id="viz-genoa-uhi" class="visualization">
                            <p class="placeholder-text">Loading Genoa UHI data from satellite imagery...</p>
                        </div>
                        <p class="viz-caption">
                            <strong>Figure 1:</strong> Downscaled Land Surface Temperature (LST) map of Genoa from satellite thermal data. 
                            Uses Inferno color scale (colorblind-friendly). Warmer areas (yellow/orange) are urban centers; 
                            cooler areas (purple/black) are rural/vegetated. Temperature range uses 1-99 percentiles. For methodology, check the 
                            <a href="#methodology" style="color: var(--primary-color); text-decoration: underline;">Methodology</a> section.
                        </p>
                    </div>
                </div>


                <div class="story-text">
                    <p class="story-paragraph">
                        The data tells a clear story: cities are not just collections of buildings and 
                        people—they are heat-generating systems that fundamentally alter local climate. 
                        As we'll see, this has profound consequences for everything from energy bills 
                        to public health.
                    </p>
                </div>
            </div>
        </section>

        <!-- Chapter 2: Why They Happen -->
        <section id="causes" class="story-chapter story-chapter-alt">
            <div class="story-container">
                <div class="chapter-header">
                    <span class="chapter-number">02</span>
                    <h2 class="chapter-title">Why Do Urban Heat Islands Happen?</h2>
                </div>
                
                <div class="story-text">
                    <p class="story-paragraph story-fade-in">
                        Urban Heat Islands (UHIs) are not accidental. They emerge from a combination of physical, 
                        material, and structural factors that systematically alter how cities absorb, store, and 
                        release heat. While these factors interact, some play a much stronger role than others.
                    </p>
                    <p class="story-paragraph story-fade-in">
                        To understand UHIs, it helps to first outline the main drivers, and then examine the most 
                        influential ones in detail.
                    </p>
                </div>

                <!-- Main Drivers Overview -->
                <div class="story-text" style="margin-top: 40px;">
                    <h3 style="font-size: 24px; font-weight: 700; margin-bottom: 20px; color: var(--primary-color);">
                        Main Drivers of Urban Heat Islands
                    </h3>
                    <p class="story-paragraph">
                        Urban heat islands are primarily caused by:
                    </p>
                    <ul style="font-size: 18px; line-height: 1.8; margin: 20px 0 20px 40px; color: var(--text-primary);">
                        <li style="margin-bottom: 10px;"><strong>Lack of vegetation</strong></li>
                        <li style="margin-bottom: 10px;"><strong>Heat-retaining urban materials and surfaces</strong></li>
                        <li style="margin-bottom: 10px;"><strong>Urban structure and geometry</strong></li>
                        <li style="margin-bottom: 10px;"><strong>Anthropogenic (waste) heat</strong></li>
                    </ul>
                    <p class="story-paragraph" style="font-style: italic; color: var(--text-secondary); margin-top: 20px;">
                        Among these, land cover and surface materials play a dominant role in shaping urban temperature patterns.
                    </p>
                </div>

                <!-- Driver 1: Lack of Vegetation -->
                <div class="story-text" style="margin-top: 50px;">
                    <h3 style="font-size: 22px; font-weight: 700; margin-bottom: 15px; color: var(--text-primary);">
                        1. Lack of Vegetation
                    </h3>
                    <p class="story-paragraph">
                        Vegetation provides cooling through:
                    </p>
                    <ul style="font-size: 17px; line-height: 1.8; margin: 15px 0 20px 30px; color: var(--text-primary);">
                        <li style="margin-bottom: 8px;"><strong>Shade</strong>, which reduces surface heating</li>
                        <li style="margin-bottom: 8px;"><strong>Evapotranspiration</strong>, which dissipates heat into the atmosphere</li>
                    </ul>
                    <p class="story-paragraph">
                        Urban areas typically contain <strong>20–40% less vegetation</strong> than surrounding rural regions, 
                        removing this natural cooling mechanism. As a result, surfaces heat up faster during the day and cool 
                        down more slowly at night.
                    </p>
                </div>

                <!-- Driver 2: Urban Materials (Primary Driver) -->
                <div class="story-text" style="margin-top: 50px;">
                    <h3 style="font-size: 22px; font-weight: 700; margin-bottom: 15px; color: var(--primary-color);">
                        2. Urban Materials and Surfaces <span style="font-size: 16px; font-weight: 600;">(Primary Driver)</span>
                    </h3>
                    <p class="story-paragraph">
                        Built environments are dominated by materials such as <strong>concrete, asphalt, and brick</strong>. 
                        These materials:
                    </p>
                    <ul style="font-size: 17px; line-height: 1.8; margin: 15px 0 20px 30px; color: var(--text-primary);">
                        <li style="margin-bottom: 8px;">Have <strong>low albedo</strong>, absorbing large amounts of solar radiation</li>
                        <li style="margin-bottom: 8px;"><strong>Store heat efficiently</strong> and release it slowly after sunset</li>
                        <li style="margin-bottom: 8px;">Remain <strong>warm during the night</strong>, intensifying thermal discomfort</li>
                    </ul>
                </div>

                <!-- Subheading: Land Cover → Heat -->
                <div class="story-text" style="margin-top: 40px; margin-bottom: 30px;">
                    <h4 style="font-size: 20px; font-weight: 700; margin-bottom: 15px; color: var(--text-primary);">
                        Land Cover → Heat: Direct Evidence
                    </h4>
                    <p class="story-paragraph">
                        Figure 2a directly compares land cover and land surface temperature in Genoa. 
                        Using the same temperature data and applying different land-cover masks shows that:
                    </p>
                    <ul style="font-size: 17px; line-height: 1.8; margin: 15px 0 20px 30px; color: var(--text-primary);">
                        <li style="margin-bottom: 8px;"><strong>Vegetated areas</strong> consistently exhibit lower temperatures</li>
                        <li style="margin-bottom: 8px;"><strong>Built-up surfaces</strong> are significantly hotter</li>
                        <li style="margin-bottom: 8px;"><strong>Bare soil and sparse vegetation</strong> fall in between</li>
                    </ul>
                    <p class="story-paragraph" style="font-weight: 600; color: var(--primary-color);">
                        This confirms that surface type, not location or weather alone, is a primary determinant of urban heat.
                    </p>
                </div>

                <!-- Land Cover & Heat Visualization: Side-by-Side Comparison -->
                <div class="story-viz">
                    <div class="story-viz-container">
                        <div id="viz-genoa-uhi-scrolly" class="visualization">
                            <p class="placeholder-text">Loading Genoa land-cover and temperature data...</p>
                        </div>
                        <p class="viz-caption">
                            <strong>Figure 2a:</strong> Side-by-side comparison of Genoa's land cover and temperature patterns. 
                            <strong>Land Cover Only</strong>: WorldCover classification showing spatial context. 
                            <strong>Vegetation Heat</strong>: Temperature for vegetated areas only. 
                            <strong>Urban Heat</strong>: Temperature for built-up/urban areas only. 
                            The same temperature data is used; only the mask changes. This visualization clearly demonstrates that 
                            built-up areas are significantly hotter than vegetated areas.
                        </p>
                    </div>
                </div>

                <!-- Subheading: Which Surfaces Contribute Most? -->
                <div class="story-text" style="margin-top: 50px; margin-bottom: 30px;">
                    <h4 style="font-size: 20px; font-weight: 700; margin-bottom: 15px; color: var(--text-primary);">
                        Which Surfaces Contribute Most to Extreme Heat?
                    </h4>
                    <p class="story-paragraph">
                        Figure 2 further quantifies this relationship using a Sankey diagram linking land cover classes 
                        to temperature ranges.
                    </p>
                    <p class="story-paragraph">
                        The visualization shows that:
                    </p>
                    <ul style="font-size: 17px; line-height: 1.8; margin: 15px 0 20px 30px; color: var(--text-primary);">
                        <li style="margin-bottom: 8px;"><strong>Built-up surfaces</strong> disproportionately contribute to the hottest temperature class</li>
                        <li style="margin-bottom: 8px;"><strong>Tree-covered areas</strong> are overwhelmingly associated with cooler temperatures</li>
                    </ul>
                    <p class="story-paragraph" style="font-weight: 600; color: var(--primary-color);">
                        This makes clear that urban materials are not just warmer on average—they dominate extreme heat conditions.
                    </p>
                </div>

                <!-- Sankey Diagram: Land Cover → Temperature -->
                <div class="story-viz">
                    <div class="story-viz-container">
                        <div id="viz-sankey-landcover" class="visualization">
                            <p class="placeholder-text">Loading land cover and temperature data...</p>
                        </div>
                        <p class="viz-caption">
                            <strong>Figure 2:</strong> Sankey diagram showing the relationship between land cover types 
                            and temperature classes in Genoa. <strong>Flow width represents the number of pixels (area) 
                            associated with each land cover–temperature class combination.</strong> Built-up surfaces 
                            dominate the hottest temperature categories, while tree cover is predominantly linked to cooler conditions.
                        </p>
                    </div>
                </div>

                <!-- Driver 3: Additional Amplifying Factors -->
                <div class="story-text" style="margin-top: 60px;">
                    <h3 style="font-size: 22px; font-weight: 700; margin-bottom: 20px; color: var(--text-primary);">
                        3. Additional Amplifying Factors
                    </h3>
                    
                    <h4 style="font-size: 19px; font-weight: 600; margin-bottom: 12px; color: var(--text-primary); margin-top: 30px;">
                        Urban Structure and Geometry
                    </h4>
                    <p class="story-paragraph">
                        Dense building arrangements create <strong>urban canyons</strong> that:
                    </p>
                    <ul style="font-size: 17px; line-height: 1.8; margin: 15px 0 20px 30px; color: var(--text-primary);">
                        <li style="margin-bottom: 8px;">Trap heat between surfaces</li>
                        <li style="margin-bottom: 8px;">Reduce wind flow</li>
                        <li style="margin-bottom: 8px;">Limit nighttime cooling</li>
                    </ul>
                    <p class="story-paragraph">
                        Multiple heated surfaces re-radiate energy toward each other, intensifying warming.
                    </p>

                    <h4 style="font-size: 19px; font-weight: 600; margin-bottom: 12px; color: var(--text-primary); margin-top: 30px;">
                        Anthropogenic (Waste) Heat
                    </h4>
                    <p class="story-paragraph">
                        Cities generate additional heat through:
                    </p>
                    <ul style="font-size: 17px; line-height: 1.8; margin: 15px 0 20px 30px; color: var(--text-primary);">
                        <li style="margin-bottom: 8px;">Air conditioning</li>
                        <li style="margin-bottom: 8px;">Vehicles</li>
                        <li style="margin-bottom: 8px;">Industrial activity</li>
                    </ul>
                    <p class="story-paragraph">
                        This waste heat directly raises ambient temperatures and reinforces existing heat accumulation.
                    </p>
                </div>

                <!-- Self-Reinforcing Cycle -->
                <div class="story-text" style="margin-top: 50px; padding: 30px; background: var(--bg-secondary); border-radius: 12px; border-left: 4px solid var(--primary-color);">
                    <h3 style="font-size: 22px; font-weight: 700; margin-bottom: 15px; color: var(--primary-color);">
                        A Self-Reinforcing Cycle
                    </h3>
                    <p class="story-paragraph">
                        These factors do not act independently. As cities warm:
                    </p>
                    <ul style="font-size: 17px; line-height: 1.8; margin: 15px 0 20px 30px; color: var(--text-primary);">
                        <li style="margin-bottom: 8px;"><strong>Cooling demand increases</strong></li>
                        <li style="margin-bottom: 8px;"><strong>More waste heat is released</strong></li>
                        <li style="margin-bottom: 8px;"><strong>Nighttime temperatures rise further</strong></li>
                    </ul>
                    <p class="story-paragraph" style="font-weight: 600;">
                        This feedback loop explains why UHIs are persistent and difficult to mitigate.
                    </p>
                </div>

                <!-- Closing Statement -->
                <div class="story-text" style="margin-top: 40px;">
                    <p class="story-paragraph" style="font-size: 18px; font-weight: 600; color: var(--text-primary);">
                        Understanding which factors dominate—particularly <span class="highlight-text">land cover and surface materials</span>—is 
                        essential for designing effective urban cooling strategies.
                    </p>
                </div>
            </div>
        </section>

        <!-- Narrative Bridge: From Causes to Impacts -->
        <section class="narrative-bridge">
            <div class="bridge-container">
                <div class="bridge-content">
                    <p class="bridge-text">
                        Now we understand <em>why</em> cities are hotter. But what does this actually mean 
                        for the people who live in them? Let's translate satellite data into human experience.
                    </p>
                </div>
            </div>
        </section>

        <!-- Chapter 3: Why does this matter? -->
        <section id="impacts" class="story-chapter">
            <div class="story-container">
                <div class="chapter-header">
                    <span class="chapter-number">03</span>
                    <h2 class="chapter-title">Why does this matter?</h2>
                </div>
                
                <div class="story-text">
                    <p class="story-paragraph story-fade-in">
                        The answer is simple: <span class="highlight-text">more people live in cities than ever before</span>. 
                        In 1960, just over 1 billion people lived in urban areas. Today, that number has grown to nearly 
                        4.7 billion—representing more than half of the world's population. As cities expand and densify, 
                        the Urban Heat Island effect intensifies, putting more lives at risk.
                    </p>
                </div>

                <!-- Proportional Squares Visualization -->
                <div class="story-viz-container">
                    <div id="viz-proportional-squares" class="visualization story-viz"></div>
                    <p class="viz-caption">
                        <strong>Figure 3:</strong> Proportional square comparison of global urban population in 1960 vs 2025. 
                        The area of each square is directly proportional to the population size, making the dramatic 4.5× growth visually immediate. 
                        What housed just over a billion urban dwellers in 1960 must now accommodate nearly 5 billion people. 
                        Data: World Bank World Development Indicators.
                    </p>
                </div>

                <div class="story-text">
                    <p class="story-paragraph story-fade-in">
                        With billions of people now concentrated in urban environments, the impacts of heat islands 
                        are no longer a niche concern—they're a global crisis affecting energy consumption, public health, 
                        and quality of life for the majority of the world's population.
                    </p>
                </div>
                
                <!-- Human-Scale Interpretation Callout -->
                <div class="human-scale-callout">
                    <div class="callout-content">
                        <h3 class="callout-title">What does 10°C actually feel like?</h3>
                        <p class="callout-text">
                            Imagine walking from a tree-lined park into a concrete plaza on a summer afternoon. 
                            That sudden wave of heat you feel? That's the Urban Heat Island effect. A 10°C surface 
                            temperature difference translates to roughly 3-5°C higher air temperatures—enough to turn 
                            a manageable 30°C into a dangerous 35°C. For vulnerable populations—the elderly, children, 
                            outdoor workers—this difference isn't just uncomfortable. <strong>It can be deadly.</strong>
                        </p>
                    </div>
                </div>

                <div class="story-text">
                    <p class="story-paragraph story-fade-in">
                        The impacts of Urban Heat Islands extend far beyond uncomfortable summer days. 
                        They create cascading effects that touch nearly every aspect of urban life, 
                        from energy bills to public health to economic productivity.
                    </p>
                    <p class="story-paragraph story-fade-in" style="animation-delay: 0.2s;">
                        The data reveals a stark reality: <span class="highlight-text">built-up areas are approximately 10°C hotter</span> than vegetated areas. 
                        This temperature difference isn't just a number—it's a force that shapes how we live, 
                        how we consume energy, and how we survive extreme heat.
                    </p>
                    <p class="story-paragraph story-fade-in" style="animation-delay: 0.4s;">
                        And here's the cruel irony: <span class="highlight-text">the hottest places coincide with where people are</span>—areas 
                        of highest population density—and <span class="highlight-text">where shade is scarce</span>—places with 
                        the least green cover. The people who need cooling the most often have the least access to it.
                    </p>
                </div>

                <!-- Pull Quote: Human Cost -->
                <div class="pull-quote">
                    <blockquote>
                        "When temperatures rise, our response is measured not just in kilowatts, but in lives. 
                        Every degree of warming triggers a cascade: higher energy demand, more waste heat, 
                        increased health risks. The data doesn't lie—summer peaks in electricity consumption 
                        directly track summer peaks in temperature. And for those who can't afford air conditioning, 
                        those peaks can be fatal."
                    </blockquote>
                </div>

                <div class="story-text">
                    <p class="story-paragraph story-fade-in" style="animation-delay: 0.55s;">
                        At a city scale, Urban Heat Islands amplify two major side effects. First, they push up <strong>energy consumption</strong> as households
                        and businesses rely more on cooling during hot periods. Second, they increase <strong>health risks</strong> by intensifying heat exposure—especially
                        for vulnerable populations—raising the likelihood of heat stress and heat-related illness.
                    </p>
                    <p class="story-paragraph story-fade-in" style="animation-delay: 0.6s;">
                        The numbers tell the story: Higher temperatures drive up air conditioning demand by 20-25%, 
                        creating a vicious cycle. More cooling generates more waste heat, which requires more cooling. 
                        Let's see exactly when and how this happens.
                    </p>
                </div>

                <!-- Italy Electricity Consumption Visualization -->
                <div class="story-viz">
                    <div class="story-viz-container">
                        <h3 class="viz-title">Italy Monthly Electricity Consumption</h3>
                        <div id="viz-italy-electricity" class="visualization">
                            <p class="placeholder-text">Loading Italy electricity consumption and temperature data...</p>
                        </div>
                    <p class="viz-caption">
                        <strong>Figure 4a:</strong> Electricity consumption and temperature patterns in Italy (2021-2025). 
                        The <strong>top panel</strong> shows monthly electricity consumption (TWh); the <strong>bottom panel</strong> shows average temperature (°C). 
                        Summer shading (beige) and shared time axis enable direct vertical comparison. <strong>Key insight:</strong> Peak electricity 
                        consumption directly coincides with peak summer temperatures, revealing how extreme heat drives energy demand through 
                        air conditioning use. Annotations and visual connectors highlight this correlation. The visualization animates on scroll, 
                        with lines growing left-to-right. Data: Terna (electricity), ERA5 Copernicus (temperature).
                    </p>
                    </div>
                </div>

                <!-- Transition: From Electricity to Long-term Trends -->
                <div class="story-transition">
                    <div class="transition-line"></div>
                    <p class="transition-text">From monthly patterns to yearly trends</p>
                    <div class="transition-line"></div>
                </div>

                <div class="story-text">
                    <p class="story-paragraph story-fade-in" style="animation-delay: 0.8s;">
                        Over decades, the pattern becomes undeniable. As temperatures climb, our need for cooling grows, 
                        while our need for heating diminishes. The trend is clear: we're moving toward a future where 
                        cooling dominates our energy consumption, especially during the hottest months.
                    </p>
                </div>

                <!-- HDD and CDD Visualization -->
                <div class="story-viz">
                    <div class="story-viz-container">
                        <h3 class="viz-title">Cooling and Heating demand in Italy (1979-2024)</h3>
                        
                        <!-- Explanation of HDD and CDD -->
                        <div class="story-text" style="margin-bottom: 30px; padding: 20px; background: var(--bg-secondary); border-left: 4px solid var(--primary-color); border-radius: 6px;">
                            <p class="story-paragraph" style="margin-bottom: 15px; font-size: 16px;">
                                To quantify heating and cooling demand, climate scientists use two key metrics:
                            </p>
                            <ul style="font-size: 16px; line-height: 1.8; margin: 0 0 15px 20px; color: var(--text-primary);">
                                <li style="margin-bottom: 10px;">
                                    <strong>Heating Degree Days (HDD)</strong>: Measures how much energy is needed to heat buildings during cold weather. 
                                    Higher HDD values indicate colder years requiring more heating.
                                </li>
                                <li style="margin-bottom: 10px;">
                                    <strong>Cooling Degree Days (CDD)</strong>: Measures how much energy is needed to cool buildings during hot weather. 
                                    Higher CDD values indicate hotter years requiring more air conditioning.
                                </li>
                            </ul>
                            <p class="story-paragraph" style="font-size: 16px; font-style: italic; color: var(--text-secondary);">
                                Both metrics are calculated relative to a baseline temperature (typically 18°C for HDD and 24°C for CDD) 
                                and summed over the year to capture total heating or cooling demand.
                            </p>
                        </div>
                        
                        <div id="viz-hdd-cdd" class="visualization">
                            <p class="placeholder-text">Loading HDD and CDD data...</p>
                        </div>
                        <p class="viz-caption">
                            <strong>Figure 4c:</strong> Annual average Heating Degree Days (HDD) and Cooling Degree Days (CDD) in Italy (1979-2024). 
                            HDD (warm/orange, above 0) declines over time (milder winters), while CDD (blue, below 0) rises (hotter summers and growing cooling needs). 
                            The seasonal strips summarize when heating vs cooling is concentrated across the year. Data source: Eurostat (nrg_chdd_m).
                        </p>
                    </div>
                </div>

                <div class="story-text">
                    <p class="story-paragraph story-fade-in" style="animation-delay: 1s;">
                        But energy consumption is only part of the story. When heat becomes extreme, when temperatures 
                        soar beyond what our bodies can handle, the consequences are measured not in kilowatts, but in lives. 
                        Heat-related illnesses become more common, especially among vulnerable populations. During heat waves 
                        amplified by UHI effects, emergency room visits spike, and mortality rates increase. The elderly, 
                        children, and those with pre-existing conditions are most at risk.
                    </p>
                </div>

                <div class="story-text">
                    <h3 style="font-size: 22px; font-weight: 700; margin: 10px 0 12px 0; color: var(--text-primary);">
                        Heat as a global public health stressor
                    </h3>
                    <p class="story-paragraph story-fade-in">
                        Beyond cities and beyond energy demand, rising temperatures act as a widespread stress test for human health.
                        The indicators below capture a progression of impacts—from early disruption of daily recovery to acute health crises,
                        economic constraints, and unequal exposure across vulnerable groups.
                    </p>
                </div>

                <div class="story-text">
                    <p class="story-paragraph story-fade-in">
                        Sleep disruption is often one of the earliest and most widespread impacts of heat exposure, affecting populations
                        even before severe health outcomes emerge.
                    </p>
                </div>

                <!-- Global Sleep Loss Visualization -->
                <div class="story-viz">
                    <div class="story-viz-container">
                        <h3 class="viz-title">Global Sleep Loss Due to Heat</h3>
                        <div id="viz-global-sleep-loss" class="visualization">
                            <p class="placeholder-text">Loading sleep loss data...</p>
                        </div>
                        <p class="viz-caption">
                            <strong>Figure 4b:</strong> Percentage of sleep lost globally due to heat exposure (2015-2024), obtained by collecting data from 68 different countries. 
                            Rising heat disrupts sleep patterns worldwide, with a sharp increase in recent years reaching 8.7% sleep loss in 2024. 
                            Data source: Lancet Countdown 2025.
                        </p>
                    </div>
                </div>

                <div class="story-text">
                    <p class="story-paragraph story-fade-in">
                        When heat exposure becomes extreme, its effects turn lethal, producing sharp spikes in mortality during major heatwave years
                        rather than a smooth, gradual trend.
                    </p>
                </div>

                <!-- Global Heat Mortality Visualization -->
                <div class="story-viz">
                    <div class="story-viz-container">
                        <h3 class="viz-title">Global Heat-Related Mortality</h3>
                        <div id="viz-global-mortality" class="visualization">
                            <p class="placeholder-text">Loading mortality data...</p>
                        </div>
                        <p class="viz-caption">
                            <strong>Figure 4c:</strong> Annual heat-related deaths globally (1990-2021). 
                            Heat mortality shows significant variability with extreme peaks during major heatwave years. 
                            The 2010 peak (721K deaths) corresponds to severe heatwaves across multiple continents. 
                            Data source: Lancet Countdown 2025.
                        </p>
                    </div>
                </div>

                <div class="story-text">
                    <p class="story-paragraph story-fade-in">
                        Heat also constrains economic activity, particularly outdoor and manual labour, reducing the number of hours people can safely
                        work each year.
                    </p>
                </div>

                <!-- Work Hours Lost Visualization -->
                <div class="story-viz">
                    <div class="story-viz-container">
                        <h3 class="viz-title">Global Potential Work Hours Lost to Heat</h3>
                        <div id="viz-work-hours-lost" class="visualization">
                            <p class="placeholder-text">Loading work hours lost data...</p>
                        </div>
                        <p class="viz-caption">
                            <strong>Figure 4d:</strong> Global potential work hours lost per person per year due to heat exposure (1990-2024). 
                            Rising temperatures increasingly impact outdoor work capacity, with 178 hours lost per person in 2024 - a 34% increase since 1990. 
                            Data source: Lancet Countdown 2025.
                        </p>
                    </div>
                </div>

                <div class="story-text">
                    <p class="story-paragraph story-fade-in">
                        These impacts are not evenly distributed: age, health, and social vulnerability strongly shape who is most exposed to dangerous heat.
                    </p>
                </div>

                <!-- Vulnerable Populations Visualization -->
                <div class="story-viz">
                    <div class="story-viz-container">
                        <h3 class="viz-title">Heatwave Exposure of Vulnerable Populations Worldwide</h3>
                        <div id="viz-vulnerable-populations" class="visualization">
                            <p class="placeholder-text">Loading vulnerable population data...</p>
                        </div>
                        <p class="viz-caption">
                            <strong>Figure 4e:</strong> Global heatwave exposure events for vulnerable age groups (1980-2024). 
                            Adults aged 65+ face dramatically higher exposure than infants, with both groups showing increasing vulnerability over time. 
                            Exposure measured as person-events exceeding heat thresholds, aggregated across all countries. 
                            Data source: Lancet Countdown 2025.
                        </p>
                    </div>
                </div>

                <div class="story-text">
                    <p class="story-paragraph story-fade-in">
                        Taken together, these indicators show how rising temperatures translate into layered human impacts. Heat first disrupts daily comfort
                        and recovery through sleep loss, then escalates into health emergencies and mortality during extreme events. At the same time, it erodes
                        economic productivity by limiting safe working hours and disproportionately exposes vulnerable populations, particularly older adults.
                        While energy demand metrics such as HDD and CDD reveal how societies adapt to warming through infrastructure, these global indicators
                        highlight the limits of adaptation when heat exceeds what technology, physiology, and social systems can absorb.
                    </p>
                </div>

            </div>
        </section>

        <!-- Chapter 4: What Can Be Done -->
        <section id="solutions" class="story-chapter story-chapter-alt">
            <div class="story-container">
                <div class="chapter-header">
                    <span class="chapter-number">04</span>
                    <h2 class="chapter-title">What Can Be Done?</h2>
                </div>
                
                <div class="story-text">
                    <p class="story-paragraph">
                        The good news is that Urban Heat Islands are not inevitable. Cities around the 
                        world are implementing strategies to mitigate the effect, and the data shows 
                        these interventions can make a real difference.
                    </p>
                </div>

                <div class="story-grid">
                    <div class="story-card">
                        <h3 class="card-title">Green Infrastructure</h3>
                        <p>
                            Increasing vegetation through parks, green roofs, and street trees can reduce 
                            temperatures by 1-3°C. Green spaces provide shade, cooling through 
                            evapotranspiration, and improved air quality.
                        </p>
                    </div>
                    <div class="story-card">
                        <h3 class="card-title">Cool Materials</h3>
                        <p>
                            Using high-albedo materials for roofs and pavements can lower surface 
                            temperatures by 5-7°C. Cool roofs and cool pavements reflect more solar 
                            energy, reducing heat absorption.
                        </p>
                    </div>
                    <div class="story-card">
                        <h3 class="card-title">Urban Planning</h3>
                        <p>
                            Thoughtful design can mitigate heat: preserving natural landscapes, creating 
                            green corridors, optimizing building orientation for ventilation, and 
                            maintaining open spaces for air circulation.
                        </p>
                    </div>
                    <div class="story-card">
                        <h3 class="card-title">Energy Efficiency</h3>
                        <p>
                            Reducing waste heat through better building insulation, efficient HVAC systems, 
                            and promoting public transportation can help break the heat-energy feedback loop.
                        </p>
                    </div>
                </div>

                <div class="story-text">
                    <p class="story-paragraph">
                        The most effective approach combines multiple strategies. Cities that integrate 
                        green infrastructure, cool materials, and smart planning see the greatest 
                        reductions in heat island intensity. The data shows that these interventions 
                        are not just environmentally beneficial—they're economically sound investments 
                        that pay dividends in reduced energy costs and improved public health.
                    </p>
                    <p class="story-paragraph">
                        As our cities continue to grow, understanding and addressing Urban Heat Islands 
                        becomes increasingly urgent. The satellite data tells us not just what's happening, 
                        but what's possible when we design cities with climate in mind.
                    </p>
                </div>
            </div>
        </section>

        <!-- Methodology Section -->
        <section id="methodology" class="story-chapter methodology-section">
            <div class="story-container">
                <div class="chapter-header">
                    <span class="chapter-number">05</span>
                    <h2 class="chapter-title">How We Know: Methodology</h2>
                </div>
                
                <div class="methodology-content">
                    <div class="methodology-subsection">
                        <h3 class="subsection-title">Data Sources</h3>
                        <p>
                            This analysis integrates multiple publicly available datasets from Earth observation, climate, energy, and health sources.
                        </p>
                        
                        <p><strong>Satellite Imagery & Land Cover:</strong></p>
                        <ul class="data-sources-list">
                            <li>
                                <strong>Landsat 8-9 TIRS</strong> - Thermal infrared imagery for Land Surface Temperature (LST) mapping. 
                                Downloaded programmatically using custom Python implementation of USGS Machine-to-Machine (M2M) API.
                                See footer for API documentation links.
                                Resolution: 100m (thermal band ST_B10), Date: July 9, 2025 (Genoa region).
                                Used as target variable for XGBoost-based spatial downscaling to 10m resolution.
                            </li>
                            <li>
                                <strong>Sentinel-2</strong> - Multispectral imagery (10m resolution) for vegetation, built-up, and water analysis. 
                                Downloaded using Copernicus Data Space Ecosystem (CDSE) API client (custom implementation).
                                See footer for CDSE documentation links.
                                Bands used: B02 (Blue), B03 (Green), B04 (Red), B08 (NIR), B11 (SWIR1), B12 (SWIR2).
                                Used for calculating spectral indices (NDVI, NDBI, NDWI) and as predictor variables for LST downscaling.
                            </li>
                            <li>
                                <strong>Digital Elevation Model (DEM)</strong> - 10m resolution elevation data for Genoa region.
                                Used to derive topographic features (slope, aspect) as predictors in LST downscaling model.
                                Topography influences local temperature patterns through shading, exposure, and cold air drainage.
                            </li>
                            <li>
                                <strong>ESA WorldCover 2021</strong> - Global land cover classification at 10m resolution. 
                                Accessed via <a href="https://esa-worldcover.org/en" target="_blank" rel="noopener noreferrer">ESA WorldCover</a>.
                                Used for categorizing land cover types (built-up, tree cover, grassland, etc.) in Genoa.
                            </li>
                        </ul>
                        
                        <p><strong>Climate Data:</strong></p>
                        <ul class="data-sources-list">
                            <li>
                                <strong>ERA5 Reanalysis</strong> - Monthly average 2-meter air temperature for Italy (2021-2025). 
                                Accessed via <a href="https://cds.climate.copernicus.eu/" target="_blank" rel="noopener noreferrer">Copernicus Climate Data Store (CDS)</a>.
                                Dataset: "ERA5 monthly averaged data on single levels from 1940 to present". 
                                Spatial resolution: 0.25° × 0.25°, aggregated to country-level monthly averages.
                            </li>
                            <li>
                                <strong>Eurostat CHDD</strong> - Heating Degree Days (HDD) and Cooling Degree Days (CDD) for Italy (1979-2024). 
                                Dataset code: <code>nrg_chdd_m</code>. 
                                Accessed via <a href="https://ec.europa.eu/eurostat/databrowser/view/nrg_chdd_m" target="_blank" rel="noopener noreferrer">Eurostat Data Browser</a> 
                                or <a href="https://ec.europa.eu/eurostat/api/dissemination/statistics/1.0/data/nrg_chdd_m" target="_blank" rel="noopener noreferrer">Eurostat REST API</a>.
                                HDD measures heating demand (colder years = higher HDD), CDD measures cooling demand (hotter years = higher CDD).
                            </li>
                        </ul>
                        
                        <p><strong>Energy Data:</strong></p>
                        <ul class="data-sources-list">
                            <li>
                                <strong>Terna S.p.A.</strong> - Monthly electricity consumption in Italy (2021-2025), measured in TWh. 
                                Terna is the Italian transmission system operator. 
                                Data downloaded from official Terna reports and processed from Excel files.
                                Files located in <code>data/electricity_consumption_italy/</code>.
                            </li>
                            <li>
                                <strong>Eurostat Energy Statistics</strong> - European energy balance data. 
                                Dataset codes: <code>nrg_cb_pem</code> (energy balances), <code>nrg_10m</code> (monthly energy statistics). 
                                Accessed via <a href="https://ec.europa.eu/eurostat/databrowser/view/nrg_cb_pem" target="_blank" rel="noopener noreferrer">Eurostat Data Browser</a> 
                                or REST API. Used as supplementary/validation data for energy consumption patterns.
                            </li>
                        </ul>
                        
                        <p><strong>Heat & Health Data:</strong></p>
                        <ul class="data-sources-list">
                            <li>
                                <strong>Lancet Countdown (2025)</strong> - Heat and health indicators used in this project (global heat-related mortality,
                                sleep lost due to heat, potential work hours lost, and vulnerable-population exposure metrics).
                                Source: <a href="https://www.lancetcountdown.org/" target="_blank" rel="noopener noreferrer">Lancet Countdown on Health and Climate Change</a>.
                                Processed into web-ready JSON in <code>data/heat_and_health/</code> and exported to <code>data/json/</code>.
                            </li>
                        </ul>
                        
                        <p>
                            <strong>Data Location:</strong> Processed data files are in <code>data/processed/</code> and <code>data/json/</code>. 
                            Raw data (if stored) is in <code>data/raw/</code>. 
                            Preprocessing scripts are in <code>data/</code> directory.
                        </p>
                    </div>

                    <div class="methodology-subsection">
                        <h3 class="subsection-title">Data Cleaning and Imputation</h3>
                        <p>
                            Raw data underwent systematic preprocessing to ensure quality and consistency:
                        </p>
                        
                        <p><strong>Satellite Imagery Processing:</strong></p>
                        <ul>
                            <li><strong>Cloud Cover Removal:</strong> Cloud-contaminated pixels identified using quality assessment bands and masked out</li>
                            <li><strong>Gap Filling:</strong> Sensor gaps and cloud shadows filled using spatial interpolation (nearest neighbor or bilinear interpolation)</li>
                            <li><strong>Atmospheric Correction:</strong> Thermal bands corrected for atmospheric effects using standard algorithms (e.g., split-window method for Landsat)</li>
                            <li><strong>Coordinate System:</strong> All raster data transformed to consistent CRS (EPSG:4326 or UTM) for spatial alignment</li>
                        </ul>
                        
                        <p><strong>Temperature Data Processing:</strong></p>
                        <ul>
                            <li><strong>Outlier Detection:</strong> Extreme values outside plausible ranges (-50°C to 60°C for LST, -30°C to 50°C for air temperature) flagged and excluded</li>
                            <li><strong>Missing Values:</strong> ERA5 monthly data gaps (rare) handled via temporal interpolation or excluded from analysis</li>
                            <li><strong>Validation:</strong> Cross-checked against meteorological station data where available</li>
                        </ul>
                        
                        <p><strong>Energy Data Processing:</strong></p>
                        <ul>
                            <li><strong>Unit Conversion:</strong> Terna data converted from MWh to TWh for consistency</li>
                            <li><strong>Missing Months:</strong> No missing data in Terna dataset (complete 2021-2025 coverage)</li>
                            <li><strong>Validation:</strong> Compared against Eurostat energy statistics for consistency checks</li>
                        </ul>
                        
                        <p><strong>Eurostat CHDD Processing:</strong></p>
                        <ul>
                            <li><strong>Data Parsing:</strong> Complex Eurostat TSV format parsed and reshaped into structured JSON</li>
                            <li><strong>Value Cleaning:</strong> Removed flags, whitespace, and non-numeric characters from cell values</li>
                            <li><strong>Aggregation:</strong> Monthly data aggregated to annual averages for trend analysis</li>
                        </ul>
                        
                        <p>
                            <strong>Preprocessing Scripts:</strong> All preprocessing code is available in the repository:
                            <code>data/download_and_preprocess_heat_data.py</code>, 
                            <code>data/eurostat_chdd/preprocessing_estat_chdd.ipynb</code>,
                            <code>data/average_monthly_temperature_ERA5/avg_monthly_temperature_italy_era5.ipynb</code>,
                            and <code>data/electricity_consumption_italy/electricity_italy_2021_2025.ipynb</code>.
                        </p>
                    </div>

                    <div class="methodology-subsection">
                        <h3 class="subsection-title">Data Processing and Analysis Pipeline</h3>
                        <p>
                            The complete pipeline transforms raw data from multiple sources into interactive visualizations.
                            Below is a visual overview of the workflow:
                        </p>
                        
                        <!-- Visual Workflow Diagram -->
                        <div style="background: var(--bg-secondary); border-radius: 8px; padding: 40px 20px; margin: 30px 0; border: 1px solid var(--border-light);">
                            <svg width="100%" height="360" viewBox="0 0 1100 360" preserveAspectRatio="xMidYMid meet" style="max-width: 100%;">
                                <defs>
                                    <marker id="arrow" markerWidth="8" markerHeight="8" refX="7" refY="3" orient="auto" markerUnits="strokeWidth">
                                        <path d="M0,0 L0,6 L8,3 z" fill="var(--text-tertiary)"/>
                                    </marker>
                                    <marker id="arrow-orange" markerWidth="8" markerHeight="8" refX="7" refY="3" orient="auto" markerUnits="strokeWidth">
                                        <path d="M0,0 L0,6 L8,3 z" fill="var(--primary-color)"/>
                                    </marker>
                                    <filter id="shadow" x="-50%" y="-50%" width="200%" height="200%">
                                        <feDropShadow dx="0" dy="1" stdDeviation="2" flood-opacity="0.1"/>
                                    </filter>
                                </defs>
                                
                                <!-- Stage 1: Ingestion -->
                                <g transform="translate(40, 145)">
                                    <rect width="160" height="70" rx="6" fill="var(--bg-card)" stroke="#3b82f6" stroke-width="2" filter="url(#shadow)"/>
                                    <text x="80" y="30" text-anchor="middle" font-size="13" font-weight="600" fill="var(--text-primary)">01 | Ingestion</text>
                                    <text x="80" y="50" text-anchor="middle" font-size="11" fill="var(--text-secondary)">Satellite + API Data</text>
                                </g>
                                
                                <!-- Arrow 1→2 -->
                                <line x1="200" y1="180" x2="240" y2="180" stroke="var(--text-tertiary)" stroke-width="2" marker-end="url(#arrow)"/>
                                
                                <!-- Stage 2: Preprocessing -->
                                <g transform="translate(240, 145)">
                                    <rect width="160" height="70" rx="6" fill="var(--bg-card)" stroke="#10b981" stroke-width="2" filter="url(#shadow)"/>
                                    <text x="80" y="30" text-anchor="middle" font-size="13" font-weight="600" fill="var(--text-primary)">02 | Preprocessing</text>
                                    <text x="80" y="50" text-anchor="middle" font-size="11" fill="var(--text-secondary)">Clean & Transform</text>
                                </g>
                                
                                <!-- Fork from preprocessing -->
                                <!-- Upper branch to Features -->
                                <path d="M 400 180 L 440 180 L 460 75" stroke="var(--text-tertiary)" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
                                
                                <!-- Lower branch to Aggregation -->
                                <path d="M 400 180 L 440 180 L 460 285" stroke="var(--text-tertiary)" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
                                
                                <!-- Stage 3: Features (upper branch) -->
                                <g transform="translate(460, 40)">
                                    <rect width="160" height="70" rx="6" fill="var(--bg-card)" stroke="#f59e0b" stroke-width="2" filter="url(#shadow)"/>
                                    <text x="80" y="30" text-anchor="middle" font-size="13" font-weight="600" fill="var(--text-primary)">03 | Features</text>
                                    <text x="80" y="50" text-anchor="middle" font-size="11" fill="var(--text-secondary)">LST, NDVI, Metrics</text>
                                </g>
                                
                                <!-- Arrow from Features to Downscaling -->
                                <line x1="620" y1="75" x2="660" y2="75" stroke="var(--primary-color)" stroke-width="2" stroke-dasharray="5,3" marker-end="url(#arrow-orange)"/>
                                
                                <!-- Stage 3.5: LST Downscaling (optional) -->
                                <g transform="translate(660, 40)">
                                    <rect width="210" height="70" rx="6" fill="rgba(var(--primary-color-rgb), 0.08)" stroke="var(--primary-color)" stroke-width="2.5" filter="url(#shadow)"/>
                                    <text x="105" y="23" text-anchor="middle" font-size="12" font-weight="700" fill="var(--primary-color)">3.5 | LST Downscaling</text>
                                    <text x="105" y="40" text-anchor="middle" font-size="10" fill="var(--text-secondary)">XGBoost ML: 100m → 10m</text>
                                    <text x="105" y="56" text-anchor="middle" font-size="9" fill="var(--text-secondary)" font-style="italic">(Genoa case study)</text>
                                </g>
                                
                                <!-- Arrow from Downscaling to Visualization -->
                                <path d="M 870 75 L 900 75 L 900 145" stroke="var(--primary-color)" stroke-width="2" fill="none" marker-end="url(#arrow-orange)"/>
                                
                                <!-- Stage 4: Aggregation (lower branch) -->
                                <g transform="translate(460, 250)">
                                    <rect width="160" height="70" rx="6" fill="var(--bg-card)" stroke="#8b5cf6" stroke-width="2" filter="url(#shadow)"/>
                                    <text x="80" y="30" text-anchor="middle" font-size="13" font-weight="600" fill="var(--text-primary)">04 | Aggregation</text>
                                    <text x="80" y="50" text-anchor="middle" font-size="11" fill="var(--text-secondary)">Export to JSON</text>
                                </g>
                                
                                <!-- Join from Aggregation to Visualization -->
                                <path d="M 620 285 L 850 285 L 900 215" stroke="var(--text-tertiary)" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
                                
                                <!-- Stage 5: Visualization (convergence point) -->
                                <g transform="translate(900, 145)">
                                    <rect width="180" height="70" rx="6" fill="var(--bg-card)" stroke="#ec4899" stroke-width="2" filter="url(#shadow)"/>
                                    <text x="90" y="30" text-anchor="middle" font-size="13" font-weight="600" fill="var(--text-primary)">05 | Visualization</text>
                                    <text x="90" y="50" text-anchor="middle" font-size="11" fill="var(--text-secondary)">Interactive Charts</text>
                                </g>
                                
                            </svg>
                        </div>
                        
                        <p style="font-size: 12px; color: var(--text-secondary); text-align: center; margin: -15px 0 20px 0; font-style: italic;">
                            Parallel workflow: satellite imagery flows through feature extraction with optional ML downscaling (orange path), while tabular data flows through aggregation. Both converge at visualization.
                        </p>
                        
                        <p><strong>Stage 1: Data Ingestion</strong></p>
                        <ul>
                            <li>Download satellite imagery via custom APIs</li>
                            <li>Fetch climate and energy data from public sources</li>
                        </ul>
                        
                        <p><strong>Stage 2: Preprocessing</strong></p>
                        <ul>
                            <li>Cloud masking, coordinate transforms, quality filters</li>
                            <li>Handle missing values and remove outliers</li>
                        </ul>
                        
                        <p><strong>Stage 3: Feature Extraction</strong></p>
                        <ul>
                            <li>Calculate LST, NDVI, UHI intensity, HDD/CDD</li>
                        </ul>
                        
                        <p><strong>Stage 4-5: Aggregation & Visualization</strong></p>
                        <ul>
                            <li>Group by time/space, export to JSON</li>
                            <li>Create interactive D3.js charts</li>
                        </ul>
                        
                        <p style="font-size: 12px; color: var(--text-secondary); margin-top: 15px;">
                            <em>Scripts: <code>data/*.py</code>, <code>data/**/*.ipynb</code> — see repository for details</em>
                        </p>
                    </div>
                    
                    <div class="methodology-subsection" style="background: linear-gradient(135deg, rgba(232, 93, 4, 0.05) 0%, rgba(232, 93, 4, 0.02) 100%); border-left: 4px solid var(--primary-color); padding: 24px; border-radius: 8px; margin: 30px 0;">
                        <h3 class="subsection-title" style="color: var(--primary-color); margin-top: 0;">Stage 3.5: LST Downscaling (Genoa)</h3>
                        <p><strong>Challenge:</strong> Landsat thermal data is 100m resolution. We need 10m to see detailed urban heat patterns.</p>
                        
                        <p><strong>Solution:</strong> XGBoost machine learning model trained to predict temperature at 10m using:</p>
                        <ul style="margin: 15px 0;">
                            <li><strong>Landsat-9:</strong> Accurate temperature at 100m</li>
                            <li><strong>Sentinel-2:</strong> Surface details at 10m (vegetation, buildings, water)</li>
                            <li><strong>DEM:</strong> Topography at 10m (elevation, slope, aspect)</li>
                        </ul>
                        
                        <p><strong>Process:</strong></p>
                        <ol style="margin-left: 20px; line-height: 1.8;">
                            <li>Compute spectral indices (NDVI, NDBI, NDWI) and topographic features</li>
                            <li>Create training dataset: aggregate 10m features to 100m, pair with Landsat LST</li>
                            <li>Train XGBoost with hyperparameter tuning (80/20 split, cross-validation)</li>
                            <li>Predict temperature at every 10m pixel</li>
                        </ol>
                        
                        <p><strong>Result:</strong> 10× higher resolution temperature maps revealing micro-scale UHI effects.</p>
                        <p style="font-size: 11px; color: var(--text-secondary); margin-top: 10px;">
                            <em>Code: <code>LST_downscaling/01_data_processing.ipynb</code>, <code>03_train_xgboost.ipynb</code></em>
                        </p>
                    </div>

                    <div class="methodology-subsection">
                        <h3 class="subsection-title">Limitations & Uncertainty</h3>
                        <p><strong>Key constraints to consider:</strong></p>
                        <ul>
                            <li><strong>Spatial Resolution:</strong> Satellite resolution limits street-level detail (100m Landsat, 10m Sentinel-2)</li>
                            <li><strong>Temporal Coverage:</strong> Single snapshot (July 9, 2025). UHI varies by season and weather</li>
                            <li><strong>Cloud Gaps:</strong> Incomplete coverage due to cloud cover</li>
                            <li><strong>Measurement Uncertainty:</strong> LST accuracy ±2-3°C; health data has confidence intervals</li>
                            <li><strong>Correlation ≠ Causation:</strong> We show patterns, not causal proof</li>
                        </ul>
                        <p style="font-size: 13px; color: var(--text-secondary); margin-top: 10px;">
                            <strong>Note:</strong> Relative comparisons (urban vs. rural) are more reliable than absolute values. Spatial patterns are more reliable than point measurements.
                        </p>
                    </div>

                    <div class="methodology-subsection">
                        <h3 class="subsection-title">Technical Details</h3>
                        <p><strong>Tools & Libraries:</strong> Python (rasterio, xarray, geopandas, pandas, XGBoost), D3.js v7, HTML/CSS/JavaScript</p>
                        <p><strong>Performance Optimizations:</strong> Lazy loading, Canvas rendering, asynchronous data loading, pre-aggregated JSON</p>
                        <p><strong>Interactions:</strong> Tooltips, zoom/pan, responsive design, mobile-optimized</p>
                    </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Team Section -->
        <section class="story-chapter">
            <div class="story-container">
                <div class="chapter-header">
                    <h2 class="chapter-title">Team</h2>
                </div>
                <div class="team-container">
                    <div class="team-member">
                        <div class="member-content">
                            <h3 class="member-name">Stefano Infusini</h3>
                            <p class="member-role">AI Student, University of Genoa</p>
                            <p class="member-description">
                                <strong>Roles:</strong> Data visualization design and implementation, D3.js development, data preprocessing and analysis pipeline, web development, project coordination.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Project Information</h3>
                    <p><strong>Urban Heat Islands: Satellite Data Visualization</strong></p>
                    <p>Data Visualization Course Project</p>
                    <p>A storytelling website communicating data-driven insights about Urban Heat Islands through satellite data visualization.</p>
                </div>
                <div class="footer-section">
                    <h3>Repository & Links</h3>
                    <p>
                        <a href="https://github.com/stefanoIn/Argus" target="_blank" rel="noopener noreferrer">GitHub Repository</a>
                    </p>
                    <p>
                        <a href="https://stefanoin.github.io/Argus/" target="_blank" rel="noopener noreferrer">Live Website (GitHub Pages)</a>
                    </p>
                    <p>
                        <a href="#methodology">Methodology</a> - Detailed documentation of data sources, processing, and limitations
                    </p>
                </div>
                <div class="footer-section">
                    <h3>Data Sources</h3>
                    <p>All data sources are properly cited in the <a href="#methodology">Methodology section</a> above.</p>
                    <p><strong>Primary Sources:</strong></p>
                    <ul class="footer-list">
                        <li>Landsat 8-9 <a href="https://github.com/stefanoIn/USGS-m2m-client">(USGS M2M Client)</a></li>
                        <li>Sentinel-2 <a href="https://github.com/stefanoIn/CDSE-api">(CDSE Client)</a></li>
                        <li>ESA WorldCover 2021</li>
                        <li>ERA5 Reanalysis (Copernicus Climate Data Store)</li>
                        <li>Terna S.p.A. Electricity Consumption Data</li>
                        <li>Eurostat Energy Statistics</li>
                        <li><a href="https://www.lancetcountdown.org/">Lancet Countdown 2025</a> (heat &amp; health indicators)</li>
                    </ul>
                    <p>See README.md in the repository for complete data source documentation and links.</p>
                </div>
                <div class="footer-section">
                    <h3>Preprocessing & Reproducibility</h3>
                    <p>Preprocessing Python scripts are documented separately. See the repository README.md for:</p>
                    <ul class="footer-list">
                        <li>How to run preprocessing scripts</li>
                        <li>Data folder structure</li>
                        <li>Reproducibility instructions</li>
                        <li>Local development setup</li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p><strong>Author:</strong> Stefano Infusini, AI student at University of Genoa</p>
                <p>&copy; 2025 Urban Heat Islands Visualization Project. All rights reserved.</p>
                <p class="footer-meta">Built with HTML5, CSS3, JavaScript, and D3.js v7 | Deployed via GitHub Pages</p>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <!-- Utility functions -->
    <script src="js/viz-utils.js"></script>
    
    <!-- Individual visualization modules -->
    <script src="js/viz-genoa-uhi.js"></script>
    <script src="js/viz-genoa-uhi-scrolly.js"></script>
    <script src="js/viz-sankey-landcover.js"></script>
    <script src="js/viz-energy-temperature.js"></script>
    <script src="js/viz-hdd-cdd.js"></script>
    <script src="js/viz-italy-electricity.js"></script>
    <script src="js/viz-proportional-squares.js"></script>
    <script src="js/viz-global-sleep-loss.js"></script>
    <script src="js/viz-global-mortality.js"></script>
    <script src="js/viz-work-hours-lost.js"></script>
    <script src="js/viz-vulnerable-populations.js"></script>
    <!-- Scroll-based animations -->
    <script src="js/scroll-animations.js"></script>
    <!-- Main initialization (must be last) -->
    <script src="js/visualizations.js"></script>
    <script src="js/main.js"></script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="description" content="The Story of Urban Heat Islands: A Data-Driven Narrative">
    <meta name="theme-color" content="#ffffff">
    <title>UHI Story</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="apple-touch-icon" href="favicon.png">
    
    <!-- D3.js -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    
    <!-- GeoTIFF.js for reading TIFF files -->
    <script src="https://unpkg.com/geotiff@2.0.7/dist-browser/geotiff.js"></script>
    
    <!-- Custom Styles -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="nav-container">
            <div class="logo">
                <a href="index.html"><h1>Urban Heat Islands</h1></a>
            </div>
            <div class="header-controls">
                <button class="theme-toggle" aria-label="Toggle dark/light theme" title="Toggle theme">
                    <span class="theme-icon theme-icon-light">
                        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <!-- Sun rays -->
                            <circle cx="12" cy="12" r="4" fill="#FFD700"/>
                            <path d="M12 3V5M12 19V21M21 12H19M5 12H3M18.36 5.64L16.95 7.05M7.05 16.95L5.64 18.36M18.36 18.36L16.95 16.95M7.05 7.05L5.64 5.64" stroke="#FFA500" stroke-width="2" stroke-linecap="round"/>
                            <!-- Earth (daytime with blue and green continents) -->
                            <circle cx="16" cy="16" r="5" fill="#4A90E2" opacity="0.9"/>
                            <path d="M14 16C14 17.5 15 18.5 16 18.5C17 18.5 18 17.5 18 16C18 14.5 17 14 16 14C15 14 14 14.5 14 16Z" fill="#6ABF4B"/>
                            <path d="M15 15C15.5 15.5 16.5 15.5 17 15C17.5 14.5 17 13.5 16 13C15 12.5 14 13 14 14C14 14.5 14.5 15 15 15Z" fill="#4A7C3A"/>
                        </svg>
                    </span>
                    <span class="theme-icon theme-icon-dark">
                        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <!-- Earth at night (dark blue/gray) -->
                            <circle cx="12" cy="12" r="8" fill="#1a2332" stroke="#2d3748" stroke-width="1.5"/>
                            <!-- Continents (dark) -->
                            <path d="M8 10C8 11 9 12 10 12C11 12 12 11 12 10C12 9 11 8.5 10 8.5C9 8.5 8 9 8 10Z" fill="#0f1419" opacity="0.8"/>
                            <path d="M14 14C14 15 15 15.5 16 15.5C17 15.5 18 15 18 14C18 13 17 12.5 16 12.5C15 12.5 14 13 14 14Z" fill="#0f1419" opacity="0.8"/>
                            <!-- City lights (heat islands) - orange/red clusters -->
                            <circle cx="9" cy="10" r="0.8" fill="#ff6b35"/>
                            <circle cx="10.5" cy="9.5" r="0.6" fill="#e85d04"/>
                            <circle cx="8.5" cy="9" r="0.5" fill="#ff8c42"/>
                            <circle cx="13" cy="14" r="0.7" fill="#ff6b35"/>
                            <circle cx="14.5" cy="13.5" r="0.5" fill="#e85d04"/>
                            <circle cx="15" cy="14.5" r="0.6" fill="#ff8c42"/>
                            <circle cx="12.5" cy="15" r="0.5" fill="#ff6b35"/>
                            <!-- Additional heat spots -->
                            <circle cx="6" cy="12" r="0.7" fill="#e85d04" opacity="0.8"/>
                            <circle cx="17" cy="11" r="0.6" fill="#ff6b35" opacity="0.8"/>
                            <circle cx="16" cy="9" r="0.5" fill="#ff8c42" opacity="0.8"/>
                            <!-- Glow effect for heat islands -->
                            <circle cx="9" cy="10" r="1.2" fill="#ff6b35" opacity="0.2"/>
                            <circle cx="13" cy="14" r="1.2" fill="#ff6b35" opacity="0.2"/>
                        </svg>
                    </span>
                </button>
                <button class="mobile-menu-toggle" aria-label="Toggle navigation menu">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
            <ul class="nav-menu">
                <li><a href="#introduction">Introduction</a></li>
                <li><a href="#causes">Why They Happen</a></li>
                <li><a href="#impacts">What They Cause</a></li>
                <li><a href="#solutions">What Can Be Done</a></li>
                <li><a href="#methodology">Methodology</a></li>
            </ul>
        </nav>
    </header>

    <!-- Sidebar Toggle Button -->
    <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Toggle navigation menu" title="Navigation menu">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3 12H21M3 6H21M3 18H21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
    </button>

    <!-- Left Sidebar Navigation -->
    <nav class="sidebar-nav" id="sidebar-nav">
        <ul class="sidebar-nav-list">
            <li><a href="#introduction" class="sidebar-nav-link" data-section="introduction">Introduction</a></li>
            <li><a href="#causes" class="sidebar-nav-link" data-section="causes">Why They Happen</a></li>
            <li><a href="#impacts" class="sidebar-nav-link" data-section="impacts">What They Cause</a></li>
            <li><a href="#solutions" class="sidebar-nav-link" data-section="solutions">What Can Be Done</a></li>
            <li><a href="#methodology" class="sidebar-nav-link" data-section="methodology">Methodology</a></li>
        </ul>
    </nav>

    <!-- Hero / Introduction -->
    <section id="introduction" class="story-hero">
        <div class="story-container">
            <h1 class="story-title">The Urban Heat Island Story</h1>
            <p class="story-lead">
                As cities grow, they create their own climate. Urban areas become islands of heat, 
                significantly warmer than the surrounding countryside. This is the story of how 
                satellite data reveals this hidden phenomenon and what it means for millions of people.
            </p>
        </div>
    </section>

    <!-- Story Content -->
    <main class="story-content">
        
        <!-- Chapter 1: What are UHI -->
        <section class="story-chapter">
            <div class="story-container">
                <div class="chapter-header">
                    <span class="chapter-number">01</span>
                    <h2 class="chapter-title">What Are Urban Heat Islands?</h2>
                </div>
                
                <div class="story-text">
                    <p class="story-paragraph">
                        Picture a city from above, viewed through a thermal camera. What you'd see 
                        is striking: the urban core glows like a hot ember, while the surrounding 
                        countryside appears cool and dark. This is an Urban Heat Island—a metropolitan 
                        area that experiences significantly warmer temperatures than its rural surroundings.
                    </p>
                    <p class="story-paragraph">
                        The temperature difference is most dramatic at night, when urban areas can be 
                        1-3°C warmer on average, and up to 12°C warmer in extreme cases. This isn't 
                        just a curiosity—it affects energy consumption, public health, and the daily 
                        lives of millions of urban residents.
                    </p>
                </div>

                <!-- Visualization 1: Genoa UHI from TIFF -->
                <div class="story-viz">
                    <div class="story-viz-container">
                        <h3 class="viz-title">Genoa Urban Heat Island: Satellite Thermal Imagery</h3>
                        <div id="viz-genoa-uhi" class="visualization">
                            <p class="placeholder-text">Loading Genoa UHI data from satellite imagery...</p>
                        </div>
                        <p class="viz-caption">
                            <strong>Figure 1:</strong> Land Surface Temperature (LST) map of Genoa from satellite thermal data. 
                            Uses Inferno color scale (colorblind-friendly). Warmer areas (yellow/orange) are urban centers; 
                            cooler areas (purple/black) are rural/vegetated. Temperature range uses 1-99 percentiles.
                        </p>
                    </div>
                </div>


                <div class="story-text">
                    <p class="story-paragraph">
                        The data tells a clear story: cities are not just collections of buildings and 
                        people—they are heat-generating systems that fundamentally alter local climate. 
                        As we'll see, this has profound consequences for everything from energy bills 
                        to public health.
                    </p>
                </div>
            </div>
        </section>

        <!-- Chapter 2: Why They Happen -->
        <section id="causes" class="story-chapter story-chapter-alt">
            <div class="story-container">
                <div class="chapter-header">
                    <span class="chapter-number">02</span>
                    <h2 class="chapter-title">Why Do Urban Heat Islands Happen?</h2>
                </div>
                
                <div class="story-text">
                    <p class="story-paragraph">
                        Urban Heat Islands don't form by accident. They're the result of multiple 
                        factors working together, each contributing to the overall warming effect. 
                        Understanding these causes is crucial to addressing the problem.
                    </p>
                </div>

                <!-- Land Cover & Heat Visualization: Side-by-Side Comparison -->
                <div class="story-viz">
                    <div class="story-viz-container">
                        <h3 class="viz-title">Land Cover & Heat: Direct Comparison</h3>
                        <div id="viz-genoa-uhi-scrolly" class="visualization">
                            <p class="placeholder-text">Loading Genoa land-cover and temperature data...</p>
                        </div>
                        <p class="viz-caption">
                            <strong>Figure 2a:</strong> Side-by-side comparison of Genoa's land cover and temperature patterns. 
                            Left: Land cover classification (WorldCover) showing spatial context. Middle: Temperature for vegetated 
                            areas only. Right: Temperature for built-up/urban areas only. The same temperature data is used; 
                            only the mask changes. This visualization clearly shows that built-up areas are significantly hotter 
                            than vegetated areas, demonstrating why urban materials are a primary driver of Urban Heat Islands.
                        </p>
                    </div>
                </div>

                <!-- Sankey Diagram: Land Cover → Temperature -->
                <div class="story-viz">
                    <div class="story-viz-container">
                        <h3 class="viz-title">Land Cover → Heat Relationships</h3>
                        <div id="viz-sankey-landcover" class="visualization">
                            <p class="placeholder-text">Loading land cover and temperature data...</p>
                        </div>
                        <p class="viz-caption">
                            <strong>Figure 2:</strong> Sankey diagram showing the relationship between land cover types 
                            and temperature classes in Genoa. <strong>Flow width represents the number of pixels (area) 
                            associated with each land cover–temperature class combination.</strong> This visualization 
                            answers: "Which surfaces contribute most to extreme heat?"
                        </p>
                        <div class="story-text" style="margin-top: 20px;">
                            <p class="story-paragraph" style="font-weight: 600; color: var(--text-primary);">
                                <strong>Key Takeaway:</strong> Built-up surfaces disproportionately contribute to the 
                                hottest temperature class, while tree-covered areas are predominantly associated with 
                                cooler conditions. This direct relationship between surface type and thermal behavior 
                                explains why urban materials are a primary driver of Urban Heat Islands.
                            </p>
                        </div>
                    </div>
                </div>

                <div class="story-grid">
                    <div class="story-card">
                        <h3 class="card-title">1. Reduced Vegetation</h3>
                        <p>
                            Trees and plants provide natural cooling through shade and evapotranspiration. 
                            Urban areas typically have 20-40% less vegetation than rural areas, losing 
                            this critical cooling mechanism.
                        </p>
                    </div>
                    <div class="story-card">
                        <h3 class="card-title">2. Urban Materials</h3>
                        <p>
                            Concrete, asphalt, and brick absorb and store heat during the day, releasing 
                            it slowly at night. These materials have low albedo (reflectivity), meaning 
                            they absorb more solar energy than natural surfaces.
                        </p>
                    </div>
                    <div class="story-card">
                        <h3 class="card-title">3. Urban Geometry</h3>
                        <p>
                            Tall buildings create "urban canyons" that trap heat and reduce wind flow. 
                            Multiple surfaces absorb and re-radiate heat, creating a complex thermal 
                            environment that intensifies warming.
                        </p>
                    </div>
                    <div class="story-card">
                        <h3 class="card-title">4. Waste Heat</h3>
                        <p>
                            Human activities generate significant waste heat from vehicles, air conditioning, 
                            and industrial processes. This anthropogenic heat directly contributes to 
                            elevated urban temperatures.
                        </p>
                    </div>
                </div>

                <div class="story-text">
                    <p class="story-paragraph">
                        These factors don't work in isolation—they create a feedback loop. As cities 
                        get hotter, people use more air conditioning, which generates more waste heat, 
                        making cities even hotter. Breaking this cycle requires understanding not just 
                        the causes, but the consequences.
                    </p>
                </div>
            </div>
        </section>

     

        <!-- Chapter 3: Why does this matter? -->
        <section id="impacts" class="story-chapter">
            <div class="story-container">
                <div class="chapter-header">
                    <span class="chapter-number">03</span>
                    <h2 class="chapter-title">Why does this matter?</h2>
                </div>
                
                <div class="story-text">
                    <p class="story-paragraph">
                        The impacts of Urban Heat Islands extend far beyond uncomfortable summer days. 
                        They create cascading effects that touch nearly every aspect of urban life, 
                        from energy bills to public health to economic productivity.
                    </p>
                </div>

             

                   <!-- Implications Section -->
                <div class="implications-section">
                    <h3 class="implications-title">Why does this matter?</h3>
                    <div class="implications-highlight">
                        <svg class="implications-icon" width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <p class="implications-stat">Built-up areas are <strong>~10°C hotter</strong> than vegetated areas</p>
                    </div>
                    <p class="implications-context">
                        Elevated surface temperatures can contribute to higher near-surface air temperatures, 
                        especially during heatwaves and low-wind conditions.
                    </p>
                    <p class="implications-intro">These areas coincide with:</p>
                    <div class="implications-grid">
                        <div class="implications-item">
                            <svg class="implications-icon-small" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M17 21V19C17 17.9391 16.5786 16.9217 15.8284 16.1716C15.0783 15.4214 14.0609 15 13 15H5C3.93913 15 2.92172 15.4214 2.17157 16.1716C1.42143 16.9217 1 17.9391 1 19V21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <circle cx="9" cy="7" r="4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M23 21V19C22.9993 18.1137 22.7044 17.2528 22.1614 16.5523C21.6184 15.8519 20.8581 15.3516 20 15.13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M16 3.13C16.8604 3.35031 17.623 3.85071 18.1676 4.55232C18.7122 5.25392 19.0078 6.11683 19.0078 7.005C19.0078 7.89318 18.7122 8.75608 18.1676 9.45769C17.623 10.1593 16.8604 10.6597 16 10.88" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <span>Highest population density</span>
                        </div>
                        <div class="implications-item">
                            <svg class="implications-icon-small" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 22C12 22 20 18 20 12V5L12 2L4 5V12C4 18 12 22 12 22Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M9 12L11 14L15 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <span>Least green cover</span>
                        </div>
                    </div>
                    <p class="implications-conclusion">
                        <svg class="implications-icon-inline" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                            <path d="M12 16V12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            <path d="M12 8H12.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        The hottest places overlap with <strong>where people are</strong> and <strong>where shade is scarce</strong>
                    </p>
                </div>

                <div class="story-text">
                    <h3 class="subsection-title">Energy Consumption</h3>
                    <p class="story-paragraph">
                        Higher temperatures drive up air conditioning demand by 20-25%, creating a 
                        vicious cycle: more cooling generates more waste heat, which requires more 
                        cooling. This increases both energy costs and greenhouse gas emissions.
                    </p>
                </div>

                <!-- Italy Electricity Consumption Visualization -->
                <div class="story-viz">
                    <div class="story-viz-container">
                        <h3 class="viz-title">Italy Monthly Electricity Consumption</h3>
                        <div id="viz-italy-electricity" class="visualization">
                            <p class="placeholder-text">Loading Italy electricity consumption and temperature data...</p>
                        </div>
                        <p class="viz-caption">
                            <strong>Figure 3a:</strong> Small multiples showing electricity consumption and average temperature in Italy (2021-2025). 
                            <strong>Panel A</strong> shows monthly electricity consumption (TWh), while <strong>Panel B</strong> shows average temperature (°C). 
                            Both panels share the same time axis and summer shading (June-August), allowing for direct vertical comparison. 
                            Peaks in electricity consumption consistently align with peak summer temperatures, suggesting a strong relationship between 
                            heat and electricity demand. The visualization uses separate y-axes to avoid visual distortion, allowing readers to naturally 
                            compare peaks vertically. Data sources: Terna (electricity), ERA5 Copernicus (temperature).
                        </p>
                    </div>
                </div>

                <!-- HDD and CDD Visualization -->
                <div class="story-viz">
                    <div class="story-viz-container">
                        <h3 class="viz-title">Heating and Cooling Degree Days Over Time</h3>
                        <div id="viz-hdd-cdd" class="visualization">
                            <p class="placeholder-text">Loading HDD and CDD data...</p>
                        </div>
                        <p class="viz-caption">
                            <strong>Figure 3c:</strong> Annual average Heating Degree Days (HDD) and Cooling Degree Days (CDD) in Italy (1979-2024). 
                            HDD measures heating demand (colder years = higher HDD), while CDD measures cooling demand (hotter years = higher CDD). 
                            The increasing trend in CDD values reflects rising temperatures and growing cooling needs. Data source: Eurostat (nrg_chdd_m).
                        </p>
                    </div>
                </div>

                <div class="story-text">
                    <h3 class="subsection-title">Public Health</h3>
                    <p class="story-paragraph">
                        Heat-related illnesses become more common, especially among vulnerable populations. 
                        During heat waves amplified by UHI effects, emergency room visits spike, and 
                        mortality rates increase. The elderly, children, and those with pre-existing 
                        conditions are most at risk.
                    </p>
                </div>

                <!-- Heat-Related Deaths Visualization -->
                <div class="story-viz">
                    <div class="story-viz-container">
                        <h3 class="viz-title">Heat-Related Mortality in Italy</h3>
                        <div id="viz-heat-deaths" class="visualization">
                            <p class="placeholder-text">Loading heat-related mortality data...</p>
                        </div>
                        <p class="viz-caption">
                            <strong>Figure 3b:</strong> Excess deaths attributed to heat in Italy (2015-2023). 
                            The dramatic spike in 2022 (18,010 deaths) reflects the extreme heat wave that summer. 
                            Data source: Nature Medicine (2023).
                        </p>
                    </div>
                </div>

                    <h3 class="subsection-title">Air Quality</h3>
                    <p class="story-paragraph">
                        Higher temperatures accelerate the formation of ground-level ozone and other 
                        pollutants. Combined with increased energy demand and emissions, this degrades 
                        air quality, creating additional health risks.
                    </p>

                    <h3 class="subsection-title">Economic Impacts</h3>
                    <p class="story-paragraph">
                        The economic costs are substantial: increased healthcare expenses, higher energy 
                        bills, reduced worker productivity, and infrastructure damage from thermal expansion. 
                        These costs are borne by individuals, businesses, and governments alike.
                    </p>
                </div>
            </div>
        </section>

        <!-- Chapter 4: What Can Be Done -->
        <section id="solutions" class="story-chapter story-chapter-alt">
            <div class="story-container">
                <div class="chapter-header">
                    <span class="chapter-number">04</span>
                    <h2 class="chapter-title">What Can Be Done?</h2>
                </div>
                
                <div class="story-text">
                    <p class="story-paragraph">
                        The good news is that Urban Heat Islands are not inevitable. Cities around the 
                        world are implementing strategies to mitigate the effect, and the data shows 
                        these interventions can make a real difference.
                    </p>
                </div>

                <div class="story-grid">
                    <div class="story-card">
                        <h3 class="card-title">Green Infrastructure</h3>
                        <p>
                            Increasing vegetation through parks, green roofs, and street trees can reduce 
                            temperatures by 1-3°C. Green spaces provide shade, cooling through 
                            evapotranspiration, and improved air quality.
                        </p>
                    </div>
                    <div class="story-card">
                        <h3 class="card-title">Cool Materials</h3>
                        <p>
                            Using high-albedo materials for roofs and pavements can lower surface 
                            temperatures by 5-7°C. Cool roofs and cool pavements reflect more solar 
                            energy, reducing heat absorption.
                        </p>
                    </div>
                    <div class="story-card">
                        <h3 class="card-title">Urban Planning</h3>
                        <p>
                            Thoughtful design can mitigate heat: preserving natural landscapes, creating 
                            green corridors, optimizing building orientation for ventilation, and 
                            maintaining open spaces for air circulation.
                        </p>
                    </div>
                    <div class="story-card">
                        <h3 class="card-title">Energy Efficiency</h3>
                        <p>
                            Reducing waste heat through better building insulation, efficient HVAC systems, 
                            and promoting public transportation can help break the heat-energy feedback loop.
                        </p>
                    </div>
                </div>

                <div class="story-text">
                    <p class="story-paragraph">
                        The most effective approach combines multiple strategies. Cities that integrate 
                        green infrastructure, cool materials, and smart planning see the greatest 
                        reductions in heat island intensity. The data shows that these interventions 
                        are not just environmentally beneficial—they're economically sound investments 
                        that pay dividends in reduced energy costs and improved public health.
                    </p>
                    <p class="story-paragraph">
                        As our cities continue to grow, understanding and addressing Urban Heat Islands 
                        becomes increasingly urgent. The satellite data tells us not just what's happening, 
                        but what's possible when we design cities with climate in mind.
                    </p>
                </div>
            </div>
        </section>

        <!-- Methodology Section -->
        <section id="methodology" class="story-chapter methodology-section">
            <div class="story-container">
                <div class="chapter-header">
                    <span class="chapter-number">05</span>
                    <h2 class="chapter-title">How We Know: Methodology</h2>
                </div>
                
                <div class="methodology-content">
                    <div class="methodology-subsection">
                        <h3 class="subsection-title">Data Sources</h3>
                        <p>
                            This analysis integrates multiple publicly available datasets from Earth observation, climate, energy, and health sources.
                        </p>
                        
                        <p><strong>Satellite Imagery & Land Cover:</strong></p>
                        <ul class="data-sources-list">
                            <li>
                                <strong>Landsat 8-9 TIRS</strong> - Thermal infrared imagery for Land Surface Temperature (LST) mapping. 
                                Accessed via <a href="https://earthexplorer.usgs.gov/" target="_blank" rel="noopener noreferrer">USGS EarthExplorer</a> 
                                or <a href="https://earthengine.google.com/" target="_blank" rel="noopener noreferrer">Google Earth Engine</a>.
                                Resolution: 100m (thermal band), Date: July 9, 2025 (Genoa region).
                            </li>
                            <li>
                                <strong>Sentinel-2</strong> - Multispectral imagery (10m resolution) for NDVI/vegetation analysis. 
                                Accessed via <a href="https://scihub.copernicus.eu/" target="_blank" rel="noopener noreferrer">Copernicus Open Access Hub</a>.
                                Used for calculating Normalized Difference Vegetation Index (NDVI).
                            </li>
                            <li>
                                <strong>ESA WorldCover 2021</strong> - Global land cover classification at 10m resolution. 
                                Accessed via <a href="https://esa-worldcover.org/en" target="_blank" rel="noopener noreferrer">ESA WorldCover</a>.
                                Used for categorizing land cover types (built-up, tree cover, grassland, etc.) in Genoa.
                            </li>
                        </ul>
                        
                        <p><strong>Climate Data:</strong></p>
                        <ul class="data-sources-list">
                            <li>
                                <strong>ERA5 Reanalysis</strong> - Monthly average 2-meter air temperature for Italy (2021-2025). 
                                Accessed via <a href="https://cds.climate.copernicus.eu/" target="_blank" rel="noopener noreferrer">Copernicus Climate Data Store (CDS)</a>.
                                Dataset: "ERA5 monthly averaged data on single levels from 1940 to present". 
                                Spatial resolution: 0.25° × 0.25°, aggregated to country-level monthly averages.
                            </li>
                            <li>
                                <strong>Eurostat CHDD</strong> - Heating Degree Days (HDD) and Cooling Degree Days (CDD) for Italy (1979-2024). 
                                Dataset code: <code>nrg_chdd_m</code>. 
                                Accessed via <a href="https://ec.europa.eu/eurostat/databrowser/view/nrg_chdd_m" target="_blank" rel="noopener noreferrer">Eurostat Data Browser</a> 
                                or <a href="https://ec.europa.eu/eurostat/api/dissemination/statistics/1.0/data/nrg_chdd_m" target="_blank" rel="noopener noreferrer">Eurostat REST API</a>.
                                HDD measures heating demand (colder years = higher HDD), CDD measures cooling demand (hotter years = higher CDD).
                            </li>
                        </ul>
                        
                        <p><strong>Energy Data:</strong></p>
                        <ul class="data-sources-list">
                            <li>
                                <strong>Terna S.p.A.</strong> - Monthly electricity consumption in Italy (2021-2025), measured in TWh. 
                                Terna is the Italian transmission system operator. 
                                Data downloaded from official Terna reports and processed from Excel files.
                                Files located in <code>data/electricity_consumption_italy/</code>.
                            </li>
                            <li>
                                <strong>Eurostat Energy Statistics</strong> - European energy balance data. 
                                Dataset codes: <code>nrg_cb_pem</code> (energy balances), <code>nrg_10m</code> (monthly energy statistics). 
                                Accessed via <a href="https://ec.europa.eu/eurostat/databrowser/view/nrg_cb_pem" target="_blank" rel="noopener noreferrer">Eurostat Data Browser</a> 
                                or REST API. Used as supplementary/validation data for energy consumption patterns.
                            </li>
                        </ul>
                        
                        <p><strong>Health Data:</strong></p>
                        <ul class="data-sources-list">
                            <li>
                                <strong>Nature Medicine (2023)</strong> - Heat-related mortality in Europe during the summer of 2022. 
                                Research article: "Heat-related mortality in Europe during the summer of 2022". 
                                Italy-specific estimate: 18,010 deaths (95% CI: 13,793–22,225) for 2022.
                                <a href="https://www.nature.com/articles/s41591-023-02419-z" target="_blank" rel="noopener noreferrer">Nature Medicine Article</a>.
                            </li>
                            <li>
                                <strong>Eurostat Excess Mortality</strong> - Excess mortality statistics (dataset: <code>demo_mexrt</code>). 
                                Used for estimating heat-related deaths in years prior to 2022, based on excess mortality patterns during heat waves.
                                Accessed via <a href="https://ec.europa.eu/eurostat/databrowser/view/demo_mexrt" target="_blank" rel="noopener noreferrer">Eurostat Data Browser</a>.
                            </li>
                        </ul>
                        
                        <p>
                            <strong>Data Location:</strong> Processed data files are in <code>data/processed/</code> and <code>data/json/</code>. 
                            Raw data (if stored) is in <code>data/raw/</code>. 
                            Preprocessing scripts are in <code>data/</code> directory.
                        </p>
                    </div>

                    <div class="methodology-subsection">
                        <h3 class="subsection-title">Data Cleaning and Imputation</h3>
                        <p>
                            Raw data underwent systematic preprocessing to ensure quality and consistency:
                        </p>
                        
                        <p><strong>Satellite Imagery Processing:</strong></p>
                        <ul>
                            <li><strong>Cloud Cover Removal:</strong> Cloud-contaminated pixels identified using quality assessment bands and masked out</li>
                            <li><strong>Gap Filling:</strong> Sensor gaps and cloud shadows filled using spatial interpolation (nearest neighbor or bilinear interpolation)</li>
                            <li><strong>Atmospheric Correction:</strong> Thermal bands corrected for atmospheric effects using standard algorithms (e.g., split-window method for Landsat)</li>
                            <li><strong>Coordinate System:</strong> All raster data transformed to consistent CRS (EPSG:4326 or UTM) for spatial alignment</li>
                        </ul>
                        
                        <p><strong>Temperature Data Processing:</strong></p>
                        <ul>
                            <li><strong>Outlier Detection:</strong> Extreme values outside plausible ranges (-50°C to 60°C for LST, -30°C to 50°C for air temperature) flagged and excluded</li>
                            <li><strong>Missing Values:</strong> ERA5 monthly data gaps (rare) handled via temporal interpolation or excluded from analysis</li>
                            <li><strong>Validation:</strong> Cross-checked against meteorological station data where available</li>
                        </ul>
                        
                        <p><strong>Energy Data Processing:</strong></p>
                        <ul>
                            <li><strong>Unit Conversion:</strong> Terna data converted from MWh to TWh for consistency</li>
                            <li><strong>Missing Months:</strong> No missing data in Terna dataset (complete 2021-2025 coverage)</li>
                            <li><strong>Validation:</strong> Compared against Eurostat energy statistics for consistency checks</li>
                        </ul>
                        
                        <p><strong>Health Data Processing:</strong></p>
                        <ul>
                            <li><strong>Data Imputation:</strong> Years prior to 2022 estimated based on Eurostat excess mortality patterns during heat waves (assumption: 30% of excess summer mortality attributed to heat)</li>
                            <li><strong>Uncertainty:</strong> 2022 data from peer-reviewed research (Nature Medicine) includes confidence intervals; earlier years have higher uncertainty</li>
                            <li><strong>Validation:</strong> Cross-referenced with published research and Eurostat mortality statistics</li>
                        </ul>
                        
                        <p><strong>Eurostat CHDD Processing:</strong></p>
                        <ul>
                            <li><strong>Data Parsing:</strong> Complex Eurostat TSV format parsed and reshaped into structured JSON</li>
                            <li><strong>Value Cleaning:</strong> Removed flags, whitespace, and non-numeric characters from cell values</li>
                            <li><strong>Aggregation:</strong> Monthly data aggregated to annual averages for trend analysis</li>
                        </ul>
                        
                        <p>
                            <strong>Preprocessing Scripts:</strong> All preprocessing code is available in the repository:
                            <code>data/download_and_preprocess_heat_data.py</code>, 
                            <code>data/eurostat_chdd/preprocessing_estat_chdd.ipynb</code>,
                            <code>data/average_monthly_temperature_ERA5/avg_monthly_temperature_italy_era5.ipynb</code>,
                            and <code>data/electricity_consumption_italy/electricity_italy_2021_2025.ipynb</code>.
                        </p>
                    </div>

                    <div class="methodology-subsection">
                        <h3 class="subsection-title">Data Processing and Analysis Pipeline</h3>
                        <p>
                            The complete pipeline transforms raw data from multiple sources into interactive visualizations:
                        </p>
                        
                        <p><strong>Stage 1: Data Ingestion</strong></p>
                        <ul>
                            <li><strong>Satellite Imagery:</strong> Load GeoTIFF files using Python libraries (<code>rasterio</code>, <code>xarray</code>, <code>geopandas</code>)</li>
                            <li><strong>API Data:</strong> Fetch JSON/CSV from Eurostat REST API, Copernicus CDS, or download manually</li>
                            <li><strong>Tabular Data:</strong> Load Excel/CSV files (Terna electricity, Eurostat TSV) using <code>pandas</code></li>
                            <li><strong>Research Data:</strong> Extract published statistics from research papers (Nature Medicine)</li>
                        </ul>
                        
                        <p><strong>Stage 2: Preprocessing</strong></p>
                        <ul>
                            <li>Apply data cleaning and imputation steps (see "Data Cleaning and Imputation" above)</li>
                            <li>Transform coordinate systems, handle missing values, remove outliers</li>
                            <li>Validate data ranges, temporal consistency, and spatial coherence</li>
                        </ul>
                        
                        <p><strong>Stage 3: Feature Extraction</strong></p>
                        <ul>
                            <li><strong>LST Calculation:</strong> Convert thermal infrared radiance to Land Surface Temperature using emissivity and atmospheric correction</li>
                            <li><strong>NDVI Calculation:</strong> Compute Normalized Difference Vegetation Index from Sentinel-2 red and NIR bands: NDVI = (NIR - Red) / (NIR + Red)</li>
                            <li><strong>UHI Intensity:</strong> Calculate temperature difference between urban and rural areas</li>
                            <li><strong>Spatial Statistics:</strong> Compute mean, median, percentiles by land cover type, region, and time period</li>
                            <li><strong>HDD/CDD Calculation:</strong> Aggregate degree days from Eurostat monthly data to annual averages</li>
                        </ul>
                        
                        <p><strong>Stage 4: Data Aggregation and Transformation</strong></p>
                        <ul>
                            <li><strong>Temporal Aggregation:</strong> Summarize by month, year, or multi-year periods</li>
                            <li><strong>Spatial Aggregation:</strong> Aggregate pixels by land cover class, administrative boundaries, or custom regions</li>
                            <li><strong>Cross-tabulation:</strong> Create land cover × temperature class matrices for Sankey diagram</li>
                            <li><strong>JSON Export:</strong> Transform processed data into JSON format optimized for web visualization</li>
                        </ul>
                        
                        <p><strong>Stage 5: Visualization Encoding</strong></p>
                        <ul>
                            <li><strong>Color Scales:</strong> Use D3.js color scales (e.g., <code>d3.scaleSequential</code> with <code>d3.interpolateInferno</code> for temperature, <code>d3.interpolateBlues</code>/<code>d3.interpolateReds</code> for heatmaps)</li>
                            <li><strong>Spatial Encoding:</strong> Map geographic coordinates to SVG/Canvas pixel positions using appropriate projections</li>
                            <li><strong>Temporal Encoding:</strong> Map dates to x-axis positions using <code>d3.scaleTime</code></li>
                            <li><strong>Interactive Elements:</strong> Add tooltips, zoom/pan, filters, and hover interactions using D3.js event handlers</li>
                            <li><strong>Responsive Design:</strong> Adapt visualizations to screen size using viewport-based scaling</li>
                        </ul>
                        
                        <p>
                            <strong>Pipeline Scripts:</strong> Complete pipeline documented in repository:
                            <code>data/download_and_preprocess_heat_data.py</code> (main preprocessing),
                            Jupyter notebooks in <code>data/eurostat_chdd/</code>, <code>data/average_monthly_temperature_ERA5/</code>, 
                            and <code>data/electricity_consumption_italy/</code> for specific datasets.
                        </p>
                    </div>

                    <div class="methodology-subsection">
                        <h3 class="subsection-title">Limitations</h3>
                        <p>
                            Key constraints and methodological limitations to consider when interpreting results:
                        </p>
                        
                        <p><strong>Satellite Data Limitations:</strong></p>
                        <ul>
                            <li><strong>Coverage Gaps:</strong> Cloud cover and sensor limitations create spatial/temporal gaps in satellite imagery. Some areas may have incomplete coverage.</li>
                            <li><strong>Resolution Constraints:</strong> Satellite resolution (100m for Landsat thermal, 10m for Sentinel-2) limits detection of fine-scale temperature variations at street or building level.</li>
                            <li><strong>Temporal Bias:</strong> Data collected at specific times (e.g., Landsat ~10:30 AM local time) may miss peak heat island effects, which often occur at night or during different times of day.</li>
                            <li><strong>Measurement Uncertainty:</strong> Sensor errors, atmospheric correction algorithms, and emissivity assumptions introduce uncertainty (±2-3°C typical for LST).</li>
                            <li><strong>Land Cover Classification Accuracy:</strong> WorldCover classifications may not capture all environmental factors (e.g., building materials, local microclimates, water features) that influence temperature.</li>
                            <li><strong>Scale Dependency:</strong> Results vary with spatial/temporal analysis scale. UHI intensity measured at different resolutions may yield different values.</li>
                        </ul>
                        
                        <p><strong>Climate and Energy Data Limitations:</strong></p>
                        <ul>
                            <li><strong>ERA5 Spatial Aggregation:</strong> Country-level monthly averages mask regional and local variations. Urban vs. rural temperature differences within Italy are not captured.</li>
                            <li><strong>Temporal Coverage:</strong> Electricity consumption data limited to 2021-2025. Temperature data extends to 2025 but may have processing delays for recent months.</li>
                            <li><strong>Energy Data Attribution:</strong> Electricity consumption peaks correlate with temperature but are also influenced by economic activity, holidays, and other factors not accounted for in this analysis.</li>
                            <li><strong>HDD/CDD Assumptions:</strong> Degree days assume fixed base temperatures (typically 18°C for HDD, 18°C or 24°C for CDD). Actual heating/cooling behavior may vary.</li>
                        </ul>
                        
                        <p><strong>Health Data Limitations:</strong></p>
                        <ul>
                            <li><strong>Attribution Uncertainty:</strong> Heat-related mortality estimates involve statistical attribution. Not all excess deaths during heat waves can be definitively attributed to heat alone.</li>
                            <li><strong>Data Imputation:</strong> Years prior to 2022 use estimated values based on excess mortality patterns. These estimates have higher uncertainty than the 2022 peer-reviewed data.</li>
                            <li><strong>Confidence Intervals:</strong> 2022 data includes 95% confidence intervals (13,793–22,225 deaths), indicating significant uncertainty even in the best-documented year.</li>
                            <li><strong>Underreporting:</strong> Heat-related deaths may be underreported, especially for indirect effects (e.g., cardiovascular events triggered by heat).</li>
                        </ul>
                        
                        <p><strong>Methodological Constraints:</strong></p>
                        <ul>
                            <li><strong>Single Case Study:</strong> Genoa UHI analysis represents one city. Results may not generalize to all urban areas.</li>
                            <li><strong>Single Time Point:</strong> Satellite imagery from July 9, 2025 represents one snapshot. UHI intensity varies seasonally and with weather conditions.</li>
                            <li><strong>Correlation vs. Causation:</strong> Visualizations show correlations (e.g., electricity and temperature) but do not establish causal relationships without additional analysis.</li>
                            <li><strong>Missing Variables:</strong> Analysis does not account for all factors influencing UHI (e.g., wind patterns, humidity, building density, population density at fine scale).</li>
                        </ul>
                    </div>

                    <div class="methodology-subsection">
                        <h3 class="subsection-title">Uncertainty Communication</h3>
                        <p>
                            Uncertainty is communicated through:
                        </p>
                        <ul>
                            <li>Missing data indicators (gray shading, "No Data" labels)</li>
                            <li>Error bars and confidence intervals where applicable</li>
                            <li>Data quality metadata and coverage information</li>
                            <li>Documented processing steps and assumptions</li>
                        </ul>
                        <p>
                            <strong>Note:</strong> Relative comparisons (urban vs. rural) are more reliable than absolute temperature values. 
                            Spatial patterns are more reliable than precise point measurements.
                        </p>
                    </div>

                    <div class="methodology-subsection">
                        <h3 class="subsection-title">Interaction Design</h3>
                        <p>
                            Interactive features enable data exploration:
                        </p>
                        <ul>
                            <li><strong>Tooltips:</strong> Hover to see temperature values, locations, and metadata</li>
                            <li><strong>Zoom & Pan:</strong> Explore geographic visualizations in detail</li>
                            <li><strong>Semantic Slider:</strong> Toggle between land cover, vegetation, and urban heat views</li>
                            <li><strong>Responsive:</strong> Touch-friendly design optimized for mobile devices</li>
                        </ul>
                    </div>

                    <div class="methodology-subsection">
                        <h3 class="subsection-title">Performance</h3>
                        <p>
                            Optimizations for fast loading and smooth interactions:
                        </p>
                        <ul>
                            <li>Pre-aggregated data files, downsampling for initial rendering</li>
                            <li>Asynchronous data loading with chunked processing</li>
                            <li>Canvas rendering for large datasets, SVG for interactive elements</li>
                            <li>Lazy loading of visualizations using Intersection Observer API</li>
                            <li>Mobile-optimized with reduced resolution and touch-friendly interactions</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Team Section -->
        <section class="story-chapter">
            <div class="story-container">
                <div class="chapter-header">
                    <h2 class="chapter-title">Team</h2>
                </div>
                <div class="team-container">
                    <div class="team-member">
                        <div class="member-content">
                            <h3 class="member-name">Stefano Infusini</h3>
                            <p class="member-role">AI Student, University of Genoa</p>
                            <p class="member-description">
                                <strong>Roles:</strong> Data visualization design and implementation, D3.js development, data preprocessing and analysis pipeline, web development, project coordination.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Project Information</h3>
                    <p><strong>Urban Heat Islands: Satellite Data Visualization</strong></p>
                    <p>Data Visualization Course Project</p>
                    <p>A storytelling website communicating data-driven insights about Urban Heat Islands through satellite data visualization.</p>
                </div>
                <div class="footer-section">
                    <h3>Repository & Links</h3>
                    <p>
                        <a href="#" target="_blank" rel="noopener noreferrer">GitHub Repository</a>
                    </p>
                    <p>
                        <a href="#" target="_blank" rel="noopener noreferrer">Live Website (GitHub Pages)</a>
                    </p>
                    <p>
                        <a href="#methodology">Methodology</a> - Detailed documentation of data sources, processing, and limitations
                    </p>
                </div>
                <div class="footer-section">
                    <h3>Data Sources</h3>
                    <p>All data sources are properly cited in the <a href="#methodology">Methodology section</a> above.</p>
                    <p><strong>Primary Sources:</strong></p>
                    <ul class="footer-list">
                        <li>Landsat 8-9 (USGS EarthExplorer)</li>
                        <li>Sentinel-2 (Copernicus Open Access Hub)</li>
                    </ul>
                    <p>See README.md in the repository for complete data source documentation and links.</p>
                </div>
                <div class="footer-section">
                    <h3>Preprocessing & Reproducibility</h3>
                    <p>Preprocessing Python scripts are documented separately. See the repository README.md for:</p>
                    <ul class="footer-list">
                        <li>How to run preprocessing scripts</li>
                        <li>Data folder structure</li>
                        <li>Reproducibility instructions</li>
                        <li>Local development setup</li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p><strong>Author:</strong> Stefano Infusini, AI student at University of Genoa</p>
                <p>&copy; 2025 Urban Heat Islands Visualization Project. All rights reserved.</p>
                <p class="footer-meta">Built with HTML5, CSS3, JavaScript, and D3.js v7 | Deployed via GitHub Pages</p>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <!-- Utility functions -->
    <script src="js/viz-utils.js"></script>
    
    <!-- Individual visualization modules -->
    <script src="js/viz-genoa-uhi.js"></script>
    <script src="js/viz-genoa-uhi-scrolly.js"></script>
    <script src="js/viz-genoa-ndvi.js"></script>
    <script src="js/viz-sankey-landcover.js"></script>
    <script src="js/viz-energy-temperature.js"></script>
    <script src="js/viz-heat-deaths.js"></script>
    <script src="js/viz-hdd-cdd.js"></script>
    <script src="js/viz-italy-electricity.js"></script>
    <!-- Main initialization (must be last) -->
    <script src="js/visualizations.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
